<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OpenClaw æ¯æ—¥æ‘˜è¦ | Daily Digest</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', 'Noto Sans TC', -apple-system, sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
      min-height: 100vh;
      color: #e2e8f0;
      line-height: 1.6;
    }
    .container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
    header {
      text-align: center;
      margin-bottom: 40px;
      padding: 30px;
      background: rgba(15, 23, 42, 0.7);
      border-radius: 20px;
      border: 1px solid rgba(94, 234, 212, 0.2);
      backdrop-filter: blur(10px);
    }
    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, #5eead4 0%, #0ea5e9 50%, #8b5cf6 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }
    .subtitle { color: #94a3b8; font-size: 1.1rem; }
    .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }
    .date-selector {
      background: rgba(30, 41, 59, 0.8);
      border: 2px solid rgba(94, 234, 212, 0.3);
      border-radius: 12px;
      padding: 12px 20px;
      color: #e2e8f0;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 200px;
    }
    .date-selector:hover {
      border-color: #5eead4;
      box-shadow: 0 0 20px rgba(94, 234, 212, 0.2);
    }
    .stats-bar {
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .stat-pill {
      background: linear-gradient(135deg, #0ea5e9 0%, #5eead4 100%);
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
      color: #0f172a;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 25px;
      margin-bottom: 40px;
    }
    .card {
      background: rgba(30, 41, 59, 0.6);
      border-radius: 16px;
      border: 1px solid rgba(94, 234, 212, 0.15);
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      backdrop-filter: blur(10px);
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      border-color: rgba(94, 234, 212, 0.4);
    }
    .card-header {
      padding: 20px;
      background: linear-gradient(135deg, rgba(94, 234, 212, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
      border-bottom: 1px solid rgba(94, 234, 212, 0.2);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .card-header h2 {
      font-size: 1.3rem;
      color: #5eead4;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .card-body { padding: 20px; }
    .tweet-item {
      padding: 15px;
      background: rgba(15, 23, 42, 0.5);
      border-radius: 10px;
      margin-bottom: 12px;
      border-left: 3px solid #0ea5e9;
      transition: all 0.2s ease;
    }
    .tweet-item:hover {
      background: rgba(15, 23, 42, 0.8);
      border-left-color: #5eead4;
    }
    .tweet-item:last-child { margin-bottom: 0; }
    .tweet-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
    }
    .author {
      font-weight: 600;
      color: #5eead4;
      text-decoration: none;
    }
    .author:hover { text-decoration: underline; }
    .tweet-stats {
      display: flex;
      gap: 12px;
      font-size: 0.85rem;
      color: #94a3b8;
    }
    .tweet-text {
      color: #e2e8f0;
      margin-bottom: 10px;
      line-height: 1.5;
    }
    .tweet-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
    .tag {
      background: rgba(94, 234, 212, 0.15);
      color: #5eead4;
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 500;
    }
    .tag.hot { background: rgba(251, 146, 60, 0.2); color: #fb923c; }
    .tag.recent { background: rgba(139, 92, 246, 0.2); color: #a78bfa; }
    .highlights {
      background: linear-gradient(135deg, rgba(251, 146, 60, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
      border: 2px solid rgba(251, 146, 60, 0.3);
      border-radius: 16px;
      padding: 25px;
      margin-top: 30px;
    }
    .highlights h2 {
      color: #fb923c;
      font-size: 1.4rem;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .highlight-item {
      padding: 12px 15px;
      background: rgba(15, 23, 42, 0.6);
      border-radius: 10px;
      margin-bottom: 10px;
      color: #e2e8f0;
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }
    .loading {
      text-align: center;
      padding: 60px;
      font-size: 1.2rem;
      color: #94a3b8;
    }
    .error {
      text-align: center;
      padding: 40px;
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      border-radius: 16px;
      color: #fca5a5;
    }
    footer {
      text-align: center;
      padding: 30px;
      color: #64748b;
      font-size: 0.9rem;
      margin-top: 40px;
      border-top: 1px solid rgba(94, 234, 212, 0.1);
    }
    footer a { color: #5eead4; text-decoration: none; }
    footer a:hover { text-decoration: underline; }
    @media (max-width: 768px) {
      h1 { font-size: 1.8rem; }
      .grid { grid-template-columns: 1fr; }
      .controls { flex-direction: column; }
    }
    .empty-state {
      text-align: center;
      padding: 40px;
      color: #94a3b8;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ¦ OpenClaw æ¯æ—¥æ‘˜è¦</h1>
      <p class="subtitle">Daily X Digest â€¢ è‡ªå‹•è¿½è¹¤ OpenClaw ç¤¾ç¾¤å‹•æ…‹</p>
    </header>

    <div class="controls">
      <select id="dateSelector" class="date-selector">
        <option value="">é¸æ“‡æ—¥æœŸ...</option>
      </select>
      <div class="stats-bar">
        <span class="stat-pill" id="costStat">ğŸ’° $0.00</span>
        <span class="stat-pill" id="tweetCount">ğŸ“Š 0 tweets</span>
      </div>
    </div>

    <div id="content">
      <div class="loading">ğŸ”„ è¼‰å…¥è³‡æ–™ä¸­...</div>
    </div>

    <footer>
      <p>ç”± CarloX ğŸ¤– è‡ªå‹•ç”Ÿæˆ â€¢ æ¯ 4 å°æ™‚æ›´æ–°ä¸€æ¬¡</p>
      <p>è³‡æ–™ä¾†æºï¼šX/Twitter API â€¢ <a href="https://github.com/openclaw/openclaw" target="_blank">OpenClaw GitHub</a></p>
    </footer>
  </div>

  <script>
    let allData = { updates: [] };
    let currentDate = null;

    async function loadData() {
      try {
        const response = await fetch('openclaw-daily-data.json?t=' + Date.now());
        if (!response.ok) throw new Error('Failed to load data');
        allData = await response.json();
        populateDateSelector();
        showLatestData();
      } catch (error) {
        document.getElementById('content').innerHTML = `
          <div class="error">
            âŒ è¼‰å…¥è³‡æ–™å¤±æ•—: ${error.message}<br>
            è«‹ç¨å¾Œé‡è©¦æˆ–æª¢æŸ¥ç¶²è·¯é€£ç·š
          </div>
        `;
      }
    }

    function populateDateSelector() {
      const selector = document.getElementById('dateSelector');
      selector.innerHTML = '<option value="">é¸æ“‡æ—¥æœŸ...</option>';
      
      const sortedUpdates = [...allData.updates].sort((a, b) => b.timestamp - a.timestamp);
      
      sortedUpdates.forEach(update => {
        const option = document.createElement('option');
        option.value = update.date;
        option.textContent = `${update.date} (${update.hot_tweets?.length || 0} ç†±é–€ / ${update.recent_tweets?.length || 0} æœ€æ–°)`;
        if (update.date === new Date().toISOString().split('T')[0]) {
          option.textContent += ' ğŸ“… ä»Šå¤©';
        }
        selector.appendChild(option);
      });

      selector.addEventListener('change', (e) => {
        if (e.target.value) {
          showDataForDate(e.target.value);
        }
      });
    }

    function showLatestData() {
      if (allData.updates.length === 0) {
        document.getElementById('content').innerHTML = `
          <div class="empty-state">
            ğŸ“­ æš«ç„¡è³‡æ–™<br>è«‹ç¨å¾Œå†è©¦
          </div>
        `;
        return;
      }

      const sorted = [...allData.updates].sort((a, b) => b.timestamp - a.timestamp);
      showDataForDate(sorted[0].date);
      document.getElementById('dateSelector').value = sorted[0].date;
    }

    function showDataForDate(date) {
      const update = allData.updates.find(u => u.date === date);
      if (!update) return;

      currentDate = date;
      
      // Update stats
      document.getElementById('costStat').textContent = `ğŸ’° $${update.cost?.toFixed(2) || '0.00'}`;
      const totalTweets = (update.hot_tweets?.length || 0) + (update.recent_tweets?.length || 0);
      document.getElementById('tweetCount').textContent = `ğŸ“Š ${totalTweets} tweets`;

      const content = document.getElementById('content');
      content.innerHTML = `
        <div class="grid">
          <div class="card">
            <div class="card-header">
              <h2>ğŸ”¥ æœ€ç†±é–€è²¼æ–‡ TOP 10</h2>
            </div>
            <div class="card-body">
              ${renderTweets(update.hot_tweets, 'hot')}
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <h2>ğŸ“° æœ€æ–°å‹•æ…‹ TOP 10</h2>
            </div>
            <div class="card-body">
              ${renderTweets(update.recent_tweets, 'recent')}
            </div>
          </div>
        </div>
        
        <div class="highlights">
          <h2>âœ¨ ä»Šæ—¥äº®é»ç¸½çµ</h2>
          ${update.highlights?.map(h => `
            <div class="highlight-item">
              <span style="font-size: 1.2rem;">${h.split(' ')[0]}</span>
              <span>${h.substring(h.indexOf(' ') + 1)}</span>
            </div>
          `).join('') || '<div class="empty-state">æš«ç„¡äº®é»</div>'}
        </div>
      `;
    }

    function renderTweets(tweets, type) {
      if (!tweets || tweets.length === 0) {
        return '<div class="empty-state">æš«ç„¡è³‡æ–™</div>';
      }

      return tweets.map((tweet, index) => `
        <div class="tweet-item">
          <div class="tweet-header">
            <a href="${tweet.url}" target="_blank" class="author">@${tweet.author}</a>
            <span style="color: #64748b; font-size: 0.85rem;">#${index + 1}</span>
          </div>
          <div class="tweet-text">${escapeHtml(tweet.text)}</div>
          <div class="tweet-stats">
            <span>â¤ï¸ ${formatNumber(tweet.likes)}</span>
            <span>ğŸ‘ï¸ ${tweet.impressions}</span>
            <span>ğŸ• ${tweet.time}</span>
          </div>
          <div class="tweet-tags">
            ${tweet.tags?.map(tag => `<span class="tag ${type}">${escapeHtml(tag)}</span>`).join('') || ''}
          </div>
        </div>
      `).join('');
    }

    function formatNumber(num) {
      if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
      if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
      return num.toString();
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // Auto-refresh every 15 minutes
    setInterval(loadData, 15 * 60 * 1000);

    // Load data on page load
    loadData();
  </script>
</body>
</html>
